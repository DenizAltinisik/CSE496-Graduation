{"ast":null,"code":"import React,{useState}from'react';import axios from'axios';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const MessageFeedback=_ref=>{let{chatId,messageIndex,currentFeedback,onFeedbackUpdate}=_ref;const[showMoreOptions,setShowMoreOptions]=useState(false);const[isSubmitting,setIsSubmitting]=useState(false);const handleFeedback=async feedbackType=>{if(isSubmitting)return;setIsSubmitting(true);try{const response=await axios.post(\"/api/chat/\".concat(chatId,\"/message/\").concat(messageIndex,\"/feedback\"),{feedback_type:feedbackType});if(response.data.success){onFeedbackUpdate(messageIndex,response.data.feedback);setShowMoreOptions(false);}}catch(error){console.error('Error sending feedback:',error);}finally{setIsSubmitting(false);}};const removeFeedback=async()=>{if(isSubmitting)return;setIsSubmitting(true);try{const response=await axios.delete(\"/api/chat/\".concat(chatId,\"/message/\").concat(messageIndex,\"/feedback\"));if(response.data.success){onFeedbackUpdate(messageIndex,null);setShowMoreOptions(false);}}catch(error){console.error('Error removing feedback:',error);}finally{setIsSubmitting(false);}};const getFeedbackIcon=feedbackType=>{const icons={thumbs_up:'üëç',thumbs_down:'üëé',love:'‚ù§Ô∏è',funny:'üòÑ',meaningless:'üòê',offensive:'üò†'};return icons[feedbackType]||'';};const getFeedbackLabel=feedbackType=>{const labels={thumbs_up:'Like',thumbs_down:'Dislike',love:'Love',funny:'Funny',meaningless:'Meaningless',offensive:'Offensive'};return labels[feedbackType]||'';};return/*#__PURE__*/_jsxs(\"div\",{className:\"message-feedback-container\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"feedback-buttons\",children:[/*#__PURE__*/_jsx(\"button\",{className:\"feedback-btn \".concat((currentFeedback===null||currentFeedback===void 0?void 0:currentFeedback.type)==='thumbs_up'?'active':''),onClick:()=>handleFeedback('thumbs_up'),disabled:isSubmitting,title:\"Like\",children:\"\\uD83D\\uDC4D\"}),/*#__PURE__*/_jsx(\"button\",{className:\"feedback-btn \".concat((currentFeedback===null||currentFeedback===void 0?void 0:currentFeedback.type)==='thumbs_down'?'active':''),onClick:()=>handleFeedback('thumbs_down'),disabled:isSubmitting,title:\"Dislike\",children:\"\\uD83D\\uDC4E\"}),/*#__PURE__*/_jsx(\"button\",{className:\"feedback-btn more-options\",onClick:()=>setShowMoreOptions(!showMoreOptions),disabled:isSubmitting,title:\"More options\",children:\"\\u22EF\"})]}),showMoreOptions&&/*#__PURE__*/_jsxs(\"div\",{className:\"more-options-dropdown\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"dropdown-header\",children:\"What do you think about this reply?\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"dropdown-options\",children:[/*#__PURE__*/_jsx(\"button\",{className:\"option-btn \".concat((currentFeedback===null||currentFeedback===void 0?void 0:currentFeedback.type)==='love'?'active':''),onClick:()=>handleFeedback('love'),disabled:isSubmitting,children:\"\\u2764\\uFE0F Love\"}),/*#__PURE__*/_jsx(\"button\",{className:\"option-btn \".concat((currentFeedback===null||currentFeedback===void 0?void 0:currentFeedback.type)==='funny'?'active':''),onClick:()=>handleFeedback('funny'),disabled:isSubmitting,children:\"\\uD83D\\uDE04 Funny\"}),/*#__PURE__*/_jsx(\"button\",{className:\"option-btn \".concat((currentFeedback===null||currentFeedback===void 0?void 0:currentFeedback.type)==='meaningless'?'active':''),onClick:()=>handleFeedback('meaningless'),disabled:isSubmitting,children:\"\\uD83D\\uDE10 Meaningless\"}),/*#__PURE__*/_jsx(\"button\",{className:\"option-btn \".concat((currentFeedback===null||currentFeedback===void 0?void 0:currentFeedback.type)==='offensive'?'active':''),onClick:()=>handleFeedback('offensive'),disabled:isSubmitting,children:\"\\uD83D\\uDE20 Offensive\"})]}),currentFeedback&&/*#__PURE__*/_jsx(\"div\",{className:\"dropdown-actions\",children:/*#__PURE__*/_jsx(\"button\",{className:\"remove-feedback-btn\",onClick:removeFeedback,disabled:isSubmitting,children:\"\\uD83D\\uDDD1\\uFE0F Remove feedback\"})})]})]});};export default MessageFeedback;","map":{"version":3,"names":["React","useState","axios","jsx","_jsx","jsxs","_jsxs","MessageFeedback","_ref","chatId","messageIndex","currentFeedback","onFeedbackUpdate","showMoreOptions","setShowMoreOptions","isSubmitting","setIsSubmitting","handleFeedback","feedbackType","response","post","concat","feedback_type","data","success","feedback","error","console","removeFeedback","delete","getFeedbackIcon","icons","thumbs_up","thumbs_down","love","funny","meaningless","offensive","getFeedbackLabel","labels","className","children","type","onClick","disabled","title"],"sources":["C:/Users/Jamai/Desktop/CSE 496 Bitirme/proje 2/frontend/src/components/MessageFeedback.js"],"sourcesContent":["import React, { useState } from 'react';\nimport axios from 'axios';\n\nconst MessageFeedback = ({ chatId, messageIndex, currentFeedback, onFeedbackUpdate }) => {\n  const [showMoreOptions, setShowMoreOptions] = useState(false);\n  const [isSubmitting, setIsSubmitting] = useState(false);\n\n  const handleFeedback = async (feedbackType) => {\n    if (isSubmitting) return;\n    \n    setIsSubmitting(true);\n    try {\n      const response = await axios.post(\n        `/api/chat/${chatId}/message/${messageIndex}/feedback`,\n        { feedback_type: feedbackType }\n      );\n      \n      if (response.data.success) {\n        onFeedbackUpdate(messageIndex, response.data.feedback);\n        setShowMoreOptions(false);\n      }\n    } catch (error) {\n      console.error('Error sending feedback:', error);\n    } finally {\n      setIsSubmitting(false);\n    }\n  };\n\n  const removeFeedback = async () => {\n    if (isSubmitting) return;\n    \n    setIsSubmitting(true);\n    try {\n      const response = await axios.delete(\n        `/api/chat/${chatId}/message/${messageIndex}/feedback`\n      );\n      \n      if (response.data.success) {\n        onFeedbackUpdate(messageIndex, null);\n        setShowMoreOptions(false);\n      }\n    } catch (error) {\n      console.error('Error removing feedback:', error);\n    } finally {\n      setIsSubmitting(false);\n    }\n  };\n\n  const getFeedbackIcon = (feedbackType) => {\n    const icons = {\n      thumbs_up: 'üëç',\n      thumbs_down: 'üëé',\n      love: '‚ù§Ô∏è',\n      funny: 'üòÑ',\n      meaningless: 'üòê',\n      offensive: 'üò†'\n    };\n    return icons[feedbackType] || '';\n  };\n\n  const getFeedbackLabel = (feedbackType) => {\n    const labels = {\n      thumbs_up: 'Like',\n      thumbs_down: 'Dislike',\n      love: 'Love',\n      funny: 'Funny',\n      meaningless: 'Meaningless',\n      offensive: 'Offensive'\n    };\n    return labels[feedbackType] || '';\n  };\n\n  return (\n    <div className=\"message-feedback-container\">\n      {/* Always visible feedback buttons */}\n      <div className=\"feedback-buttons\">\n        <button\n          className={`feedback-btn ${currentFeedback?.type === 'thumbs_up' ? 'active' : ''}`}\n          onClick={() => handleFeedback('thumbs_up')}\n          disabled={isSubmitting}\n          title=\"Like\"\n        >\n          üëç\n        </button>\n        \n        <button\n          className={`feedback-btn ${currentFeedback?.type === 'thumbs_down' ? 'active' : ''}`}\n          onClick={() => handleFeedback('thumbs_down')}\n          disabled={isSubmitting}\n          title=\"Dislike\"\n        >\n          üëé\n        </button>\n        \n        <button\n          className=\"feedback-btn more-options\"\n          onClick={() => setShowMoreOptions(!showMoreOptions)}\n          disabled={isSubmitting}\n          title=\"More options\"\n        >\n          ‚ãØ\n        </button>\n      </div>\n      \n      {/* More options dropdown */}\n      {showMoreOptions && (\n        <div className=\"more-options-dropdown\">\n          <div className=\"dropdown-header\">\n            What do you think about this reply?\n          </div>\n          \n          <div className=\"dropdown-options\">\n            <button\n              className={`option-btn ${currentFeedback?.type === 'love' ? 'active' : ''}`}\n              onClick={() => handleFeedback('love')}\n              disabled={isSubmitting}\n            >\n              ‚ù§Ô∏è Love\n            </button>\n            \n            <button\n              className={`option-btn ${currentFeedback?.type === 'funny' ? 'active' : ''}`}\n              onClick={() => handleFeedback('funny')}\n              disabled={isSubmitting}\n            >\n              üòÑ Funny\n            </button>\n            \n            <button\n              className={`option-btn ${currentFeedback?.type === 'meaningless' ? 'active' : ''}`}\n              onClick={() => handleFeedback('meaningless')}\n              disabled={isSubmitting}\n            >\n              üòê Meaningless\n            </button>\n            \n            <button\n              className={`option-btn ${currentFeedback?.type === 'offensive' ? 'active' : ''}`}\n              onClick={() => handleFeedback('offensive')}\n              disabled={isSubmitting}\n            >\n              üò† Offensive\n            </button>\n          </div>\n          \n          {currentFeedback && (\n            <div className=\"dropdown-actions\">\n              <button\n                className=\"remove-feedback-btn\"\n                onClick={removeFeedback}\n                disabled={isSubmitting}\n              >\n                üóëÔ∏è Remove feedback\n              </button>\n            </div>\n          )}\n        </div>\n      )}\n    </div>\n  );\n};\n\nexport default MessageFeedback;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}